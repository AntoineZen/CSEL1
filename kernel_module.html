

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Kernel Modules &mdash; CSEL1 0.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="CSEL1 0.0 documentation" href="index.html"/>
        <link rel="next" title="Drivers" href="drivers.html"/>
        <link rel="prev" title="Environement setup" href="env_setup.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> CSEL1
          

          
          </a>

          
            
            
              <div class="version">
                0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="env_setup.html">Environement setup</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Kernel Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#kernel-module-basics">Kernel module basics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#generation-of-a-out-of-tree-kernel-module-for-the-odroid-xu3">1) Generation of a &#8220;out of tree&#8221; kernel module for the ODROID-XU3</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-some-parameter-the-module">2) Add some parameter the module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#memory-management-libraries-and-utility-functions">Memory Management, libraries and utility functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#proc-slabinfo">/proc/slabinfo</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#input-output-access">Input/Output access</a></li>
<li class="toctree-l2"><a class="reference internal" href="#kernel-threads">Kernel Threads</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sleep">Sleep</a></li>
<li class="toctree-l2"><a class="reference internal" href="#interrupts">Interrupts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_system.html">File Systems</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">CSEL1</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Kernel Modules</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/kernel_module.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="kernel-modules">
<h1>Kernel Modules<a class="headerlink" href="#kernel-modules" title="Permalink to this headline">¶</a></h1>
<div class="section" id="kernel-module-basics">
<h2>Kernel module basics<a class="headerlink" href="#kernel-module-basics" title="Permalink to this headline">¶</a></h2>
<div class="section" id="generation-of-a-out-of-tree-kernel-module-for-the-odroid-xu3">
<h3>1) Generation of a &#8220;out of tree&#8221; kernel module for the ODROID-XU3<a class="headerlink" href="#generation-of-a-out-of-tree-kernel-module-for-the-odroid-xu3" title="Permalink to this headline">¶</a></h3>
<p>We can make a simple module:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;linux/module.h&gt;</span>
<span class="cp">#include &lt;linux/init.h&gt;</span>
<span class="cp">#include &lt;linux/kernel.h&gt;</span>


<span class="k">static</span> <span class="kt">int</span> <span class="n">__init</span> <span class="nf">skeleton_init</span><span class="p">(</span><span class="kt">void</span>  <span class="p">)</span>
<span class="p">{</span>
    <span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Linux module skeleton loaded</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__exit</span> <span class="nf">skeleton_exit</span><span class="p">(</span><span class="kt">void</span>  <span class="p">)</span>
<span class="p">{</span>
    <span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Linux module skeletonunloaded</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">module_init</span><span class="p">(</span><span class="n">skeleton_init</span><span class="p">);</span>
<span class="n">module_exit</span><span class="p">(</span><span class="n">skeleton_exit</span><span class="p">);</span>

<span class="n">MODULE_AUTHOR</span><span class="p">(</span><span class="s">&quot;Antoine Zen-Ruffinen &lt;antoine.zen@gmail.com&gt;&quot;</span><span class="p">);</span>
<span class="n">MODULE_DESCRIPTION</span><span class="p">(</span><span class="s">&quot;Module skeleton&quot;</span><span class="p">);</span>
<span class="n">MODULE_LICENSE</span><span class="p">(</span><span class="s">&quot;GPL&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>And the appropriate Makefile:</p>
<div class="highlight-make"><div class="highlight"><pre><span class="cp">ifneq ($(KERNELRELEASE),)</span>
<span class="c"># This define by some magic the module name</span>
<span class="nv">obj-m</span>  <span class="o">+=</span>  mymodule.o
<span class="c"># This define the object needed the make the module. The .C file names will be extrapolated from that.</span>
<span class="nv">mymodule-objs</span><span class="o">:=</span> skeleton.o

<span class="cp">else</span>

<span class="c"># Variable needed for the cross-compilation</span>
<span class="nv">CPU</span> <span class="o">:=</span> arm
<span class="nv">KDIR</span> <span class="o">:=</span> ~/workspace/xu3/buildroot/output/build/linux-4.3.3/
<span class="nv">TOOLS</span> <span class="o">:=</span> ~/workspace/xu3/buildroot/output/host/usr/bin/arm-linux-gnueabihf-

<span class="c"># Source path</span>
<span class="nv">PWD</span> <span class="o">:=</span> <span class="k">$(</span>shell <span class="nb">pwd</span><span class="k">)</span>

<span class="nf">all</span><span class="o">:</span>
    <span class="k">$(</span>MAKE<span class="k">)</span> -C <span class="k">$(</span>KDIR<span class="k">)</span> <span class="nv">M</span><span class="o">=</span><span class="k">$(</span>PWD<span class="k">)</span> <span class="nv">ARCH</span><span class="o">=</span><span class="k">$(</span>CPU<span class="k">)</span> <span class="nv">CROSS_COMPILE</span><span class="o">=</span><span class="k">$(</span>TOOLS<span class="k">)</span> modules

<span class="nf">clean</span><span class="o">:</span>
    <span class="k">$(</span>MAKE<span class="k">)</span> -C <span class="k">$(</span>KDIR<span class="k">)</span> <span class="nv">M</span><span class="o">=</span><span class="k">$(</span>PWD<span class="k">)</span> clean

<span class="cp">endif</span>
</pre></div>
</div>
<p>We can compile the kernel module with a simple <cite>make</cite> command:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">antoine@antoine-vb-64:~/master/CSEL1/02_kernel_modules$</span> make
<span class="go">make -C ~/workspace/xu3/buildroot/output/build/linux-4.3.3/ M=/home/antoine/master/CSEL1/02_kernel_modules ARCH=arm CROSS_COMPILE=~/workspace/xu3/buildroot/output/host/usr/bin/arm-linux-gnueabihf- modules</span>
<span class="go">make[1]: Entering directory `/home/antoine/workspace/xu3/buildroot/output/build/linux-4.3.3&#39;</span>
<span class="go">  CC [M]  /home/antoine/master/CSEL1/02_kernel_modules/skeleton.o</span>
<span class="go">  LD [M]  /home/antoine/master/CSEL1/02_kernel_modules/mymodule.o</span>
<span class="go">  Building modules, stage 2.</span>
<span class="go">  MODPOST 1 modules</span>
<span class="go">  CC      /home/antoine/master/CSEL1/02_kernel_modules/mymodule.mod.o</span>
<span class="go">  LD [M]  /home/antoine/master/CSEL1/02_kernel_modules/mymodule.ko</span>
<span class="go">make[1]: Leaving directory `/home/antoine/workspace/xu3/buildroot/output/build/linux-4.3.3&#39;</span>
<span class="gp">antoine@antoine-vb-64:~/master/CSEL1/02_kernel_modules$</span>
</pre></div>
</div>
<p>When this is done, we can copy it to the NFS file system :</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">antoine@antoine-vb-64:~/master/CSEL1/02_kernel_modules$</span> cp mymodule.ko ~/workspace/
</pre></div>
</div>
<p>On the odroid, the kernel module is then available:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">#</span> <span class="nb">cd</span> /usr/workspace/
<span class="gp">#</span> ls
<span class="go">RemoteSystemsTempFiles  mymodule.ko             xu3</span>
<span class="gp">#</span>
</pre></div>
</div>
<p>We can install it. We then see the debug message in the kernel log:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">#</span> insmod mymodule.ko
<span class="gp">#</span> dmesg
<span class="go">.....</span>
<span class="go">[    7.619706] random: nonblocking pool is initialized</span>
<span class="go">[   12.715841] NET: Registered protocol family 10</span>
<span class="go">[ 3119.198674] Linux module skeleton loaded</span>
<span class="gp">#</span>
</pre></div>
</div>
<p>We can check the modules loaded into the kernel in two ways:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">#</span> lsmod
<span class="go">Module                  Size  Used by    Tainted: G</span>
<span class="go">mymodule                1051  0</span>
<span class="go">ipv6                  406889 26 [permanent]</span>

<span class="gp">#</span> cat /proc/modules
<span class="go">mymodule 1051 0 - Live 0xbf07f000 (O)</span>
<span class="go">ipv6 406889 26 [permanent], Live 0xbf000000</span>
</pre></div>
</div>
<p>The first command show module name, memory size and usage. The second show the same informations plus some address (maybe the module address ?).</p>
<p>We can then remove the module from the kernel:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">#</span> rmmod mymodule
<span class="go">...</span>
<span class="go">[ 3499.366676] Linux module skeletonunloaded</span>
</pre></div>
</div>
<p>To make the module available for the <cite>modprobe</cite> command, we need to add a <cite>install</cite> target to the makefile (above the <cite>clean</cite> target):</p>
<div class="highlight-make"><div class="highlight"><pre><span class="nv">MODPATH</span> <span class="o">:=</span> /tftpboot/odroidxu3


<span class="nf">install</span><span class="o">:</span>
    <span class="k">$(</span>MAKE<span class="k">)</span> -C <span class="k">$(</span>KDIR<span class="k">)</span> <span class="nv">M</span><span class="o">=</span><span class="k">$(</span>PWD<span class="k">)</span> <span class="nv">INSTALL_MOD_PATH</span><span class="o">=</span><span class="k">$(</span>MODPATH<span class="k">)</span> modules_install
</pre></div>
</div>
<p>And then we can install it to the filesystem:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">antoine@antoine-vb-64:~/master/CSEL1/02_kernel_modules$</span> sudo make install
<span class="go">make -C ~/workspace/xu3/buildroot/output/build/linux-4.3.3/ M=/home/antoine/master/CSEL1/02_kernel_modules INSTALL_MOD_PATH=/tftpboot/odroidxu3 modules_install</span>
<span class="go">make[1]: Entering directory `/home/antoine/workspace/xu3/buildroot/output/build/linux-4.3.3&#39;</span>
<span class="go">  INSTALL /home/antoine/master/CSEL1/02_kernel_modules/mymodule.ko</span>
<span class="go">  DEPMOD  4.3.3</span>
<span class="go">make[1]: Leaving directory `/home/antoine/workspace/xu3/buildroot/output/build/linux-4.3.3&#39;</span>
</pre></div>
</div>
<p>Then we can try the <code class="docutils literal"><span class="pre">modprob</span></code> command on the target:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">#</span> modprobe mymodule
<span class="gp">#</span>
<span class="gp">#</span> dmesg
<span class="go">...</span>
<span class="go">[ 1169.627580] Linux module skeleton loaded</span>
<span class="gp">#</span> lsmod
<span class="go">Module                  Size  Used by    Tainted: G</span>
<span class="go">mymodule                1051  0</span>
<span class="go">ipv6                  406996 26 [permanent]</span>
<span class="gp">#</span>
</pre></div>
</div>
<p>We can see that the module &#8220;mymodule&#8221; has been loaded into the kernel.</p>
</div>
<div class="section" id="add-some-parameter-the-module">
<h3>2) Add some parameter the module<a class="headerlink" href="#add-some-parameter-the-module" title="Permalink to this headline">¶</a></h3>
<p>We can add some parameter to the module:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="p">...</span>
<span class="k">static</span> <span class="kt">char</span><span class="o">*</span> <span class="n">text</span> <span class="o">=</span> <span class="s">&quot;Some blabla&quot;</span><span class="p">;</span>
<span class="n">module_param</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">charp</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">some_val</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">module_param</span><span class="p">(</span><span class="n">some_val</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">__init</span> <span class="nf">skeleton_init</span><span class="p">(</span><span class="kt">void</span>  <span class="p">)</span>
<span class="p">{</span>
    <span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Linux module skeleton loaded</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;mymodule: some_val=%d, text=%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">some_val</span><span class="p">,</span> <span class="n">text</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">...</span>
</pre></div>
</div>
<p>We can then try it on the Odroid:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">#</span> insmod mymodule.ko
<span class="gp">#</span> dmesg
<span class="go">...</span>
<span class="go">[ 5776.321720] Linux module skeleton loaded</span>
<span class="go">[ 5681.759363] mymodule: some_val=0, text=Some blabla</span>

<span class="gp">#</span> rmmod mymodule.ko
<span class="gp">#</span> insmod mymodule.ko <span class="nv">some_val</span><span class="o">=</span>56 <span class="nv">text</span><span class="o">=</span><span class="s2">&quot;Hello kernel&quot;</span>
<span class="gp">#</span> dmesg
<span class="go">....</span>
<span class="go">[ 5776.321720] Linux module skeleton loaded</span>
<span class="go">[ 5776.324895] mymodule: some_val=56, text=Hello</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="memory-management-libraries-and-utility-functions">
<h2>Memory Management, libraries and utility functions<a class="headerlink" href="#memory-management-libraries-and-utility-functions" title="Permalink to this headline">¶</a></h2>
<p>This code creates dynamic elements in the kernel. Some Arguments can be pass in parameter and use inside the code like “element” and “text” in this example. All of the created elements will receive a unique identifier</p>
<p>Example: with 5 elements and «Salut les copains… » as text parameter passed to the module on load with modprobe:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">#</span> modprobe  mymodule <span class="nv">elements</span><span class="o">=</span>5 <span class="nv">text</span><span class="o">=</span><span class="s2">&quot;Salut les copains...&quot;</span>

<span class="go">[13013.483087] Linux module ModuleMemory load</span>
<span class="go">[13013.485794] text: Salut les copains...</span>
<span class="go">[13013.485794] elements: 5</span>
<span class="go">[13013.492355] Element : id = 0, text = Salut les copains...</span>
<span class="go">[13013.497306] Element : id = 1, text = Salut les copains...</span>
<span class="go">[13013.502920] Element : id = 2, text = Salut les copains...</span>
<span class="go">[13013.508074] Element : id = 3, text = Salut les copains...</span>
<span class="go">[13013.513716] Element : id = 4, text = Salut les copains...</span>
</pre></div>
</div>
<p>When the module is removed, a text is displayed and show all elements destroyed:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">#</span> modprobe -r mymodule

<span class="go">[13265.542569] Deleting elements :</span>
<span class="go">[13265.544162]  Element : id = 0</span>
<span class="go">[13265.547349]  Element : id = 1</span>
<span class="go">[13265.550291]  Element : id = 2</span>
<span class="go">[13265.553172]  Element : id = 3</span>
<span class="go">[13265.556166]  Element : id = 4</span>
<span class="go">[13265.559066] [DONE]</span>
<span class="go">[13265.561114] Linux module ModuleMemory unload</span>
</pre></div>
</div>
<div class="section" id="proc-slabinfo">
<h3>/proc/slabinfo<a class="headerlink" href="#proc-slabinfo" title="Permalink to this headline">¶</a></h3>
<p>Slab allocation is a memory management mechanism intended for the efficient memory allocation of kernel objects. It eliminates fragmentation caused by allocations and deallocations. The technique is used to retain allocated memory that contains a data object of a certain type for reuse upon subsequent allocations of objects of the same type. It is analogous to an object pool, but only applies to memory, not other resources:</p>
<div class="highlight-python"><div class="highlight"><pre>slabinfo - version: 2.1
# name            &lt;active_objs&gt; &lt;num_objs&gt; &lt;objsize&gt; &lt;objperslab&gt; &lt;pagesperslab&gt; : tunables &lt;limit&gt; &lt;batchcount&gt; &lt;sharedfactor&gt; : slabdata &lt;active_slabs&gt; &lt;num_slabs&gt; &lt;sharedavail&gt;
ip6-frags              0      0    200   20    1 : tunables    0    0    0 : slabdata      0      0      0
RAWv6                 30     30   1088   30    8 : tunables    0    0    0 : slabdata      1      1      0
UDPLITEv6              0      0   1088   30    8 : tunables    0    0    0 : slabdata      0      0      0
UDPv6                150    150   1088   30    8 : tunables    0    0    0 : slabdata      5      5      0
tw_sock_TCPv6          0      0    208   39    2 : tunables    0    0    0 : slabdata      0      0      0
TCPv6                 45     45   2176   15    8 : tunables    0    0    0 : slabdata      3      3      0
kcopyd_job             0      0   3384    9    8 : tunables    0    0    0 : slabdata      0      0      0
dm_io                  0      0     80   51    1 : tunables    0    0    0 : slabdata      0      0      0
cfq_queue              0      0    152   26    1 : tunables    0    0    0 : slabdata      0      0      0
bsg_cmd                0      0    288   28    2 : tunables    0    0    0 : slabdata      0      0      0
mqueue_inode_cache     36     36    896   36    8 : tunables    0    0    0 : slabdata      1      1      0
fuse_inode             0      0    768   21    4 : tunables    0    0    0 : slabdata      0      0      0
ntfs_big_inode_cache      0      0   1088   30    8 : tunables    0    0    0 : slabdata      0      0      0
ntfs_inode_cache       0      0    480   34    4 : tunables    0    0    0 : slabdata      0      0      0
nfs_direct_cache       0      0    288   28    2 : tunables    0    0    0 : slabdata      0      0      0
nfs_commit_data       36     36    448   36    4 : tunables    0    0    0 : slabdata      1      1      0
nfs_inode_cache      384    384   1000   32    8 : tunables    0    0    0 : slabdata     12     12      0
fat_inode_cache        0      0    792   20    4 : tunables    0    0    0 : slabdata      0      0      0
fat_cache              0      0     24  170    1 : tunables    0    0    0 : slabdata      0      0      0
jbd2_transaction_s      0      0    192   21    1 : tunables    0    0    0 : slabdata      0      0      0
jbd2_journal_handle      0      0     56   73    1 : tunables    0    0    0 : slabdata      0      0      0
jbd2_journal_head      0      0     64   64    1 : tunables    0    0    0 : slabdata      0      0      0
jbd2_revoke_table_s      0      0     16  256    1 : tunables    0    0    0 : slabdata      0      0      0
ext4_inode_cache       0      0   1256   26    8 : tunables    0    0    0 : slabdata      0      0      0
ext4_prealloc_space      0      0    104   39    1 : tunables    0    0    0 : slabdata      0      0      0
ext4_io_end            0      0     40  102    1 : tunables    0    0    0 : slabdata      0      0      0
ext4_extent_status      0      0     32  128    1 : tunables    0    0    0 : slabdata      0      0      0
ext2_inode_cache       0      0    928   35    8 : tunables    0    0    0 : slabdata      0      0      0
dquot                  0      0    320   25    2 : tunables    0    0    0 : slabdata      0      0      0
kioctx               550    550    640   25    4 : tunables    0    0    0 : slabdata     22     22      0
rpc_inode_cache        0      0    704   23    4 : tunables    0    0    0 : slabdata      0      0      0
ip4-frags             22     22    184   22    1 : tunables    0    0    0 : slabdata      1      1      0
UDP-Lite               0      0    960   34    8 : tunables    0    0    0 : slabdata      0      0      0
RAW                   34     34    960   34    8 : tunables    0    0    0 : slabdata      1      1      0
UDP                  170    170    960   34    8 : tunables    0    0    0 : slabdata      5      5      0
tw_sock_TCP           39     39    208   39    2 : tunables    0    0    0 : slabdata      1      1      0
request_sock_TCP      34     34    240   34    2 : tunables    0    0    0 : slabdata      1      1      0
TCP                   80     80   2048   16    8 : tunables    0    0    0 : slabdata      5      5      0
blkdev_queue          51     51   1848   17    8 : tunables    0    0    0 : slabdata      3      3      0
blkdev_requests       39     39    208   39    2 : tunables    0    0    0 : slabdata      1      1      0
biovec-256            60     60   3072   10    8 : tunables    0    0    0 : slabdata      6      6      0
biovec-128             0      0   1536   21    8 : tunables    0    0    0 : slabdata      0      0      0
biovec-64              0      0    768   21    4 : tunables    0    0    0 : slabdata      0      0      0
sock_inode_cache     225    225    640   25    4 : tunables    0    0    0 : slabdata      9      9      0
skbuff_fclone_cache    168    168    384   21    2 : tunables    0    0    0 : slabdata      8      8      0
configfs_dir_cache      0      0     56   73    1 : tunables    0    0    0 : slabdata      0      0      0
file_lock_cache       75     75    160   25    1 : tunables    0    0    0 : slabdata      3      3      0
net_namespace          0      0   2816   11    8 : tunables    0    0    0 : slabdata      0      0      0
shmem_inode_cache    805    805    712   23    4 : tunables    0    0    0 : slabdata     35     35      0
taskstats              0      0    328   24    2 : tunables    0    0    0 : slabdata      0      0      0
proc_inode_cache     675    675    632   25    4 : tunables    0    0    0 : slabdata     27     27      0
sigqueue             224    224    144   28    1 : tunables    0    0    0 : slabdata      8      8      0
bdev_cache           108    108    896   36    8 : tunables    0    0    0 : slabdata      3      3      0
kernfs_node_cache  26989  27027    104   39    1 : tunables    0    0    0 : slabdata    693    693      0
inode_cache        18792  18792    600   27    4 : tunables    0    0    0 : slabdata    696    696      0
dentry             20260  20260    200   20    1 : tunables    0    0    0 : slabdata   1013   1013      0
iint_cache             0      0     48   85    1 : tunables    0    0    0 : slabdata      0      0      0
buffer_head          128    128     64   64    1 : tunables    0    0    0 : slabdata      2      2      0
nsproxy              170    170     24  170    1 : tunables    0    0    0 : slabdata      1      1      0
vm_area_struct      1242   1242     88   46    1 : tunables    0    0    0 : slabdata     27     27      0
mm_struct            224    224    576   28    4 : tunables    0    0    0 : slabdata      8      8      0
files_cache          600    600    320   25    2 : tunables    0    0    0 : slabdata     24     24      0
signal_cache         576    576    896   36    8 : tunables    0    0    0 : slabdata     16     16      0
sighand_cache        276    276   1408   23    8 : tunables    0    0    0 : slabdata     12     12      0
task_struct          299    312   3968    8    8 : tunables    0    0    0 : slabdata     39     39      0
anon_vma             504    504    112   36    1 : tunables    0    0    0 : slabdata     14     14      0
radix_tree_node      260    260    312   26    2 : tunables    0    0    0 : slabdata     10     10      0
trace_event_file    1275   1275     48   85    1 : tunables    0    0    0 : slabdata     15     15      0
ftrace_event_field   3840   3840     32  128    1 : tunables    0    0    0 : slabdata     30     30      0
idr_layer_cache      450    450   1072   30    8 : tunables    0    0    0 : slabdata     15     15      0
page-&gt;ptl            816    816     40  102    1 : tunables    0    0    0 : slabdata      8      8      0
kmalloc-8192          36     36   8192    4    8 : tunables    0    0    0 : slabdata      9      9      0
kmalloc-4096          80     80   4096    8    8 : tunables    0    0    0 : slabdata     10     10      0
kmalloc-2048         288    288   2048   16    8 : tunables    0    0    0 : slabdata     18     18      0
kmalloc-1024        1312   1312   1024   32    8 : tunables    0    0    0 : slabdata     41     41      0
kmalloc-512          512    512    512   32    4 : tunables    0    0    0 : slabdata     16     16      0
kmalloc-256          512    512    256   32    2 : tunables    0    0    0 : slabdata     16     16      0
kmalloc-192         1155   1155    192   21    1 : tunables    0    0    0 : slabdata     55     55      0
kmalloc-128         3968   3968    128   32    1 : tunables    0    0    0 : slabdata    124    124      0
kmalloc-64         13760  13760     64   64    1 : tunables    0    0    0 : slabdata    215    215      0
kmem_cache_node      160    160    128   32    1 : tunables    0    0    0 : slabdata      5      5      0
kmem_cache           126    126    192   21    1 : tunables    0    0    0 : slabdata      6      6      0
</pre></div>
</div>
</div>
</div>
<div class="section" id="input-output-access">
<h2>Input/Output access<a class="headerlink" href="#input-output-access" title="Permalink to this headline">¶</a></h2>
<p>The following code access the IO memory space to read the device identifier form CPU register:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;linux/module.h&gt;</span>
<span class="cp">#include &lt;linux/init.h&gt;</span>
<span class="cp">#include &lt;linux/kernel.h&gt;</span>
<span class="cp">#include &lt;linux/moduleparam.h&gt;</span>
<span class="cp">#include &lt;linux/io.h&gt;</span>
<span class="cp">#include &lt;linux/ioport.h&gt;</span>

<span class="k">static</span> <span class="kt">int</span><span class="o">*</span> <span class="n">id_ptr</span><span class="p">;</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">__init</span> <span class="nf">skeleton_init</span><span class="p">(</span><span class="kt">void</span>  <span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">id</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">product_id</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">package_id</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">major_v</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">minor_v</span><span class="p">;</span>
	
	<span class="c1">// Print that module is being loaded</span>
    <span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Module iotest loaded</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    
    <span class="c1">// Request the memory region</span>
    <span class="n">request_mem_region</span><span class="p">(</span><span class="mh">0x10000000</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">,</span> <span class="s">&quot;iotest&quot;</span><span class="p">);</span>
    
    <span class="c1">// Map it to our local pointer (used to read an later to release</span>
    <span class="n">id_ptr</span> <span class="o">=</span> <span class="n">ioremap</span><span class="p">(</span><span class="mh">0x10000000</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">);</span>
    
    <span class="c1">// Check that the memory regison was sucessfully mapped</span>
    <span class="k">if</span><span class="p">(</span><span class="n">id_ptr</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
    	<span class="c1">// Read the ID word</span>
    	<span class="n">id</span> <span class="o">=</span> <span class="n">readl</span><span class="p">(</span><span class="n">id_ptr</span><span class="p">);</span>
    	
    	<span class="c1">// Extract the various bit-fields</span>
    	<span class="n">minor_v</span> 	<span class="o">=</span> <span class="p">(</span><span class="n">id</span> <span class="o">&amp;</span> <span class="mh">0x0000000F</span><span class="p">);</span>
    	<span class="n">major_v</span> 	<span class="o">=</span> <span class="p">(</span><span class="n">id</span> <span class="o">&amp;</span> <span class="mh">0x000000F0</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="p">;</span>
    	<span class="n">package_id</span> 	<span class="o">=</span> <span class="p">(</span><span class="n">id</span> <span class="o">&amp;</span> <span class="mh">0x00000F00</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">;</span>
    	<span class="n">product_id</span>  <span class="o">=</span> <span class="p">(</span><span class="n">id</span> <span class="o">&amp;</span> <span class="mh">0xFFFFF000</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">12</span><span class="p">;</span>
    	
    	<span class="c1">// Print the informations readen</span>
    	<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Product=%d, package=%d, major=%d, minor=%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">product_id</span><span class="p">,</span> <span class="n">package_id</span><span class="p">,</span> <span class="n">major_v</span><span class="p">,</span> <span class="n">minor_v</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__exit</span> <span class="nf">skeleton_exit</span><span class="p">(</span><span class="kt">void</span>  <span class="p">)</span>
<span class="p">{</span>
	<span class="c1">// Unmap using the recieved pointer</span>
	<span class="n">iounmap</span><span class="p">(</span><span class="n">id_ptr</span><span class="p">);</span>
	
	<span class="c1">// Release the IO memory region that was requested.</span>
	<span class="n">release_mem_region</span><span class="p">(</span><span class="mh">0x10000000</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">);</span>
	   
	<span class="c1">// PRint that everthing is done</span>
    <span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Module iotest removed</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">module_init</span><span class="p">(</span><span class="n">skeleton_init</span><span class="p">);</span>
<span class="n">module_exit</span><span class="p">(</span><span class="n">skeleton_exit</span><span class="p">);</span>

<span class="n">MODULE_AUTHOR</span><span class="p">(</span><span class="s">&quot;Antoine Zen-Ruffinen &lt;antoine.zen@gmail.com&gt;&quot;</span><span class="p">);</span>
<span class="n">MODULE_DESCRIPTION</span><span class="p">(</span><span class="s">&quot;Module skeleton&quot;</span><span class="p">);</span>
<span class="n">MODULE_LICENSE</span><span class="p">(</span><span class="s">&quot;GPL&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>It read one word at address 0x10000000 and decode it.</p>
<p>We can then test the module by installing it:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">#</span> insmod iotest.ko
<span class="gp">#</span> dmesg
<span class="go">...</span>
<span class="go">[ 7578.946034] Module iotest loaded</span>
<span class="go">[ 7578.947962] Product=939042, package=0, major=0, minor=1</span>
<span class="gp">#</span> cat /proc/iomem
<span class="go">...</span>
<span class="go">10000000-100000ff : iotest</span>
<span class="go">...</span>
<span class="gp">#</span> rmmod iotest.ko
<span class="gp">#</span>
</pre></div>
</div>
<p>So we have read the product id =  939042, package id is 0 and version is 0.1. We can see that the region was reserved for the <cite>iotest</cite> module by reading <cite>/proc/iomem</cite>.</p>
</div>
<div class="section" id="kernel-threads">
<h2>Kernel Threads<a class="headerlink" href="#kernel-threads" title="Permalink to this headline">¶</a></h2>
<p>This code instantiate a thread inside the kernel. Each 5 seconds a message will be plotted in the console “Hello from thread !”. <code class="docutils literal"><span class="pre">Ssleep()</span></code> is used to pause the thread for 5 seconds.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">skeleton.c</span>
<span class="cm">*/</span>
<span class="cp">#include &lt;linux/module.h&gt;</span><span class="cm">/* needed by all modules */</span><span class="cp"></span>
<span class="cp">#include &lt;linux/init.h&gt;</span><span class="cm">/* needed for macros */</span><span class="cp"></span>
<span class="cp">#include &lt;linux/kernel.h&gt; </span><span class="cm">/* needed for debugging */</span><span class="cp"></span>
<span class="cp">#include &lt;linux/kthread.h&gt; </span><span class="cm">/* for use threads */</span><span class="cp"></span>
<span class="cp">#include &lt;linux/delay.h&gt; </span><span class="cm">/* for use ssleep */</span><span class="cp"></span>

<span class="k">struct</span> <span class="n">task_struct</span><span class="o">*</span> <span class="n">k</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">thread</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">kthread_should_stop</span><span class="p">()){</span>
        <span class="n">ssleep</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
        <span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Hello from thread !</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">__init</span> <span class="nf">skeleton_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Linux module skeleton loaded</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="c1">//Run thread</span>
    <span class="n">k</span><span class="o">=</span><span class="n">kthread_run</span><span class="p">(</span><span class="kr">thread</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;my_thread&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__exit</span> <span class="nf">skeleton_exit</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">kthread_stop</span><span class="p">(</span><span class="n">k</span><span class="p">);</span>
    <span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Linux module skeleton unloaded </span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">module_init</span><span class="p">(</span><span class="n">skeleton_init</span><span class="p">);</span>
<span class="n">module_exit</span><span class="p">(</span><span class="n">skeleton_exit</span><span class="p">);</span>
<span class="n">MODULE_AUTHOR</span><span class="p">(</span><span class="s">&quot;Yann Maret&quot;</span><span class="p">);</span>
<span class="n">MODULE_DESCRIPTION</span><span class="p">(</span><span class="s">&quot;Module skeleton&quot;</span><span class="p">);</span>
<span class="n">MODULE_LICENSE</span><span class="p">(</span><span class="s">&quot;GPL&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>When the module is loaded inside the kernel, the module plot each 5 seconds the « Hello from thread ! » message and stop when the module is removed from the kernel:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">#</span> insmod mymodule.ko

<span class="go">[17736.188563] Linux module skeleton loaded</span>
<span class="gp">#</span> <span class="o">[</span>17741.194918<span class="o">]</span> Hello from thread !
<span class="go">[17746.199929] Hello from thread !</span>
<span class="go">[17751.204932] Hello from thread !</span>
<span class="go">[17756.209915] Hello from thread !</span>
<span class="go">[17761.214929] Hello from thread !</span>
<span class="go">rmmod mymodule.ko</span>

<span class="go">[17766.219913] Hello from thread !</span>
<span class="go">[17766.221689] Linux module skeleton unloaded</span>
</pre></div>
</div>
</div>
<div class="section" id="sleep">
<h2>Sleep<a class="headerlink" href="#sleep" title="Permalink to this headline">¶</a></h2>
<p>In this task, we have two threads. The first one is waiting for an event of the second. The second just send the event every five seconds. For this, we use an event queue. Note that the waiting of an event works together with a C condition. So the producer of the event need to set some condition to <strong>true</strong> before to wake-up the threads waiting for the event/condition. The consumer thread will turn this condition to <strong>false</strong>. In our example the C condition will be as simple boolean global variable (<em>wakeup</em> in the code).</p>
<p>Here is the output of the module test:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">#</span> insmod sleep.ko
<span class="gp">#</span> sleep 30
<span class="gp">#</span> dmesg
<span class="go">....</span>
<span class="go">[  133.689821] Thread one started</span>
<span class="go">[  133.690097] Linux module sleep loaded</span>
<span class="go">[  133.690153] Thread two started</span>
<span class="go">[  133.690159] Thread two: Sending event</span>
<span class="go">[  133.701950] Thread one: Got event</span>
<span class="go">[  138.691556] Thread two: Sending event</span>
<span class="go">[  138.693856] Thread one: Got event</span>
<span class="go">[  143.696559] Thread two: Sending event</span>
<span class="go">[  143.698843] Thread one: Got event</span>
<span class="go">[  148.701548] Thread two: Sending event</span>
<span class="go">[  148.703829] Thread one: Got event</span>
<span class="go">[  153.706556] Thread two: Sending event</span>
<span class="go">[  153.708839] Thread one: Got event</span>
<span class="gp">#</span> rmmod sleep.ko
<span class="gp">#</span>
</pre></div>
</div>
</div>
<div class="section" id="interrupts">
<h2>Interrupts<a class="headerlink" href="#interrupts" title="Permalink to this headline">¶</a></h2>
<p>This code handle by interrupt the SW1 button press state. And when the button is pressed a message like “Hello SW1” is plotted.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;linux/module.h&gt;</span>
<span class="cp">#include &lt;linux/init.h&gt;</span>
<span class="cp">#include &lt;linux/interrupt.h&gt;</span>
<span class="cp">#include &lt;linux/gpio.h&gt;</span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">irq</span><span class="p">;</span>

<span class="kt">irqreturn_t</span> <span class="nf">short_interrupt</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">printk</span><span class="p">(</span><span class="s">&quot;Hello SW1!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">IRQ_HANDLED</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">__init</span> <span class="nf">skeleton_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>   
    <span class="n">pr_info</span> <span class="p">(</span><span class="s">&quot;Linux module skeleton loaded</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>

    <span class="n">gpio_request</span><span class="p">(</span><span class="mi">29</span><span class="p">,</span><span class="nb">NULL</span><span class="p">);</span>
    <span class="n">gpio_direction_input</span><span class="p">(</span><span class="mi">29</span><span class="p">);</span>
    <span class="n">irq</span> <span class="o">=</span> <span class="n">gpio_to_irq</span><span class="p">(</span><span class="mi">29</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">irq</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">){</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">request_irq</span><span class="p">(</span><span class="n">irq</span><span class="p">,</span><span class="n">short_interrupt</span><span class="p">,</span><span class="n">IRQF_TRIGGER_FALLING</span><span class="p">,</span><span class="s">&quot;sw1&quot;</span><span class="p">,</span><span class="nb">NULL</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">ret</span><span class="p">){</span>
            <span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span> <span class="s">&quot;SW1: can&#39;t get assigned irq %i</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">irq</span><span class="p">);</span>
            <span class="n">irq</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__exit</span> <span class="nf">skeleton_exit</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">pr_info</span> <span class="p">(</span><span class="s">&quot;Linux module skeleton unloaded</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">irq</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
        <span class="n">free_irq</span><span class="p">(</span><span class="n">irq</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">module_init</span> <span class="p">(</span><span class="n">skeleton_init</span><span class="p">);</span>
<span class="n">module_exit</span> <span class="p">(</span><span class="n">skeleton_exit</span><span class="p">);</span>
<span class="n">MODULE_AUTHOR</span> <span class="p">(</span><span class="s">&quot;Yann Maret&quot;</span><span class="p">);</span>
<span class="n">MODULE_DESCRIPTION</span> <span class="p">(</span><span class="s">&quot;Module skeleton&quot;</span><span class="p">);</span>
<span class="n">MODULE_LICENSE</span> <span class="p">(</span><span class="s">&quot;GPL&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Each time the SW1 is pressed a message is displayed on the screen:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">#</span> insmod mymodule.ko

<span class="go">[20036.188563] Linux module skeleton loaded</span>
<span class="gp">#</span> <span class="o">[</span>20041.194918<span class="o">]</span> Hello SW1 !
<span class="go">[20046.199929] Hello SW1 !</span>
<span class="go">[20051.204932] Hello SW1 !</span>
<span class="go">[20056.209915] Hello SW1 !</span>
<span class="go">[20061.214929] Hello SW1 !</span>
<span class="go">[20071.214569] Hello SW1 !</span>
<span class="go">[20072.214349] Hello SW1 !</span>

<span class="go">rmmod mymodule.ko</span>

<span class="go">[17766.221689] Linux module skeleton unloaded</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="drivers.html" class="btn btn-neutral float-right" title="Drivers" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="env_setup.html" class="btn btn-neutral" title="Environement setup" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Antoine Zen-Ruffinen, Yann Maret.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>